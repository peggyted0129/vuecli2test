{"version":3,"sources":["webpack:///src/views/back/BackCoupon.vue","webpack:///./src/views/back/BackCoupon.vue?59ce","webpack:///./src/views/back/BackCoupon.vue"],"names":["BackCoupon","data","coupons","tempCoupon","title","is_enabled","percent","due_date","code","Date","pagination","isNew","isLoading","components","Pagination","watch","timestamp","Math","floor","this","methods","openCouponModal","item","vm","$","modal","extends_default","dateAndTime","toISOString","split","getCoupons","url","arguments","length","undefined","$http","get","then","response","console","log","updateCoupon","_this","api","httpMethod","id","success","$bus","$emit","message","delCoupon","_this2","delete","created","back_BackCoupon","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","active","on","update:active","$event","_v","click","_m","_l","key","_s","_f","pages","emitPages","tabindex","role","aria-labelledby","aria-hidden","for","directives","name","rawName","value","expression","type","placeholder","domProps","input","target","composing","$set","true-value","false-value","checked","Array","isArray","_i","_q","change","$$a","$$el","$$c","$$i","concat","slice","data-dismiss","staticRenderFns","scope","aria-label","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/9.9463e92a6ab646b72278.js","sourcesContent":["<template>\r\n<section class=\"my-6 text-topic\">\r\n  <loading :active.sync=\"isLoading\"></loading>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"text-right mb-8\">\r\n      <button  class=\"btn btn-topic btn-md h5\" @click=\"openCouponModal(true)\">建立新的優惠券</button>\r\n    </div>\r\n    <table class=\"table table-hover mb-10\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\" class=\"py-4\">名稱</th>\r\n          <th scope=\"col\" class=\"py-4\">優惠碼</th>\r\n          <th scope=\"col\" class=\"py-4\">折扣百分比</th>\r\n          <th scope=\"col\" class=\"py-4\">到期日</th>\r\n          <th scope=\"col\" class=\"py-4\">是否啟用</th>\r\n          <th scope=\"col\" class=\"py-4\">編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, key) in coupons\" :key=\"key\">\r\n          <td class=\"py-4\">{{ item.title }}</td>\r\n          <td class=\"py-4\">{{ item.code }}</td>\r\n          <td class=\"py-4\">{{ item.percent }}%</td>\r\n          <td class=\"py-4\">{{ item.due_date | date }}</td>\r\n          <td class=\"py-4\">\r\n            <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n            <span v-else class=\"text-muted\">未起用</span>\r\n          </td>\r\n          <td class=\"py-4\">\r\n            <button  class=\"btn btn-outline-topic btn-sm\" @click=\"openCouponModal(false, item)\">編輯</button>\r\n            <button  class=\"btn btn-outline-danger btn-sm\" @click=\"delCoupon(item.id)\">刪除</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <Pagination :pages=\"pagination\" @emitPages=\"getCoupons\"></Pagination>\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"form-group\">\r\n              <label for=\"title\">標題</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\r\n                placeholder=\"請輸入標題\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"coupon_code\">優惠碼</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\r\n                placeholder=\"請輸入優惠碼\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"due_date\">到期日</label>\r\n              <input type=\"date\" class=\"form-control\" id=\"due_date\"\r\n                v-model=\"due_date\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"price\">折扣百分比</label>\r\n              <input type=\"number\" class=\"form-control\" id=\"price\"\r\n                v-model=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <div class=\"form-check\">\r\n                <input class=\"form-check-input\" type=\"checkbox\"\r\n                  :true-value=\"1\"\r\n                  :false-value=\"0\"\r\n                  v-model=\"tempCoupon.is_enabled\" id=\"is_enabled\">\r\n                <label class=\"form-check-label\" for=\"is_enabled\">\r\n                  是否啟用\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateCoupon\">更新優惠券</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Pagination from '@/components/Pagination';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {\r\n        title: '',\r\n        is_enabled: 0,\r\n        percent: 100,\r\n        due_date: 0,  // timestamp (1612051200)\r\n        code: '',\r\n      },\r\n      due_date: new Date(), \r\n      pagination: {}, \r\n      isNew: false,\r\n      isLoading: false,\r\n    };\r\n  },\r\n  components: {\r\n    Pagination,\r\n  },\r\n  watch: {\r\n    due_date() {\r\n      const vm = this;\r\n      const timestamp = Math.floor(new Date(vm.due_date) / 1000);\r\n      vm.tempCoupon.due_date = timestamp;\r\n    },\r\n  },\r\n  methods: {\r\n    openCouponModal(isNew, item) {\r\n      const vm = this;\r\n      $('#couponModal').modal('show');\r\n      vm.isNew = isNew;\r\n      if (vm.isNew) {\r\n        vm.tempCoupon = {};\r\n      } else {\r\n        vm.tempCoupon = {...item};\r\n        const dateAndTime = new Date(vm.tempCoupon.due_date * 1000).toISOString().split('T');\r\n        vm.due_date = dateAndTime[0];\r\n      }\r\n    },\r\n    getCoupons(page = 1) {\r\n      const vm = this;\r\n      const url = `${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/admin/coupons?page=${page}`;\r\n      this.$http.get(url).then((response) => {\r\n        console.log('getCoupons:　', response.data);\r\n        vm.coupons = response.data.coupons;\r\n        vm.pagination = response.data.pagination;\r\n      });\r\n    },\r\n    updateCoupon() {\r\n      const vm = this;\r\n      let api = `${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/admin/coupon`;\r\n      let httpMethod = 'post';\r\n      if (!vm.isNew) {\r\n        api = `${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/admin/coupon/${vm.tempCoupon.id}`;\r\n        httpMethod = 'put';\r\n        vm.due_date = new Date(vm.tempCoupon.due_date * 1000);\r\n      }\r\n      this.$http[httpMethod](api, { data: vm.tempCoupon }).then((response) => {\r\n        console.log(response.data);\r\n        if (response.data.success){\r\n          $('#couponModal').modal('hide');\r\n          vm.getCoupons();\r\n          this.$bus.$emit('message:push', response.data.message, 'info');\r\n        }else {\r\n          $('#couponModal').modal('hide');\r\n          vm.getCoupons();\r\n          console.log('新增失敗');\r\n          this.$bus.$emit('message:push', '新增產品失敗', 'danger');\r\n        }\r\n      });\r\n    },\r\n    delCoupon(id) {\r\n      const vm = this;\r\n      const url = `${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/admin/coupon/${id}`;\r\n      this.$http.delete(url).then((response) => {\r\n        this.$bus.$emit('message:push', response.data.message, 'danger');\r\n        vm.isLoading = false;\r\n        vm.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/back/BackCoupon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"my-6 text-topic\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_vm._v(\" \"),_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"text-right mb-8\"},[_c('button',{staticClass:\"btn btn-topic btn-md h5\",on:{\"click\":function($event){return _vm.openCouponModal(true)}}},[_vm._v(\"建立新的優惠券\")])]),_vm._v(\" \"),_c('table',{staticClass:\"table table-hover mb-10\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.coupons),function(item,key){return _c('tr',{key:key},[_c('td',{staticClass:\"py-4\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('td',{staticClass:\"py-4\"},[_vm._v(_vm._s(item.code))]),_vm._v(\" \"),_c('td',{staticClass:\"py-4\"},[_vm._v(_vm._s(item.percent)+\"%\")]),_vm._v(\" \"),_c('td',{staticClass:\"py-4\"},[_vm._v(_vm._s(_vm._f(\"date\")(item.due_date)))]),_vm._v(\" \"),_c('td',{staticClass:\"py-4\"},[(item.is_enabled === 1)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"啟用\")]):_c('span',{staticClass:\"text-muted\"},[_vm._v(\"未起用\")])]),_vm._v(\" \"),_c('td',{staticClass:\"py-4\"},[_c('button',{staticClass:\"btn btn-outline-topic btn-sm\",on:{\"click\":function($event){return _vm.openCouponModal(false, item)}}},[_vm._v(\"編輯\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",on:{\"click\":function($event){return _vm.delCoupon(item.id)}}},[_vm._v(\"刪除\")])])])}),0)]),_vm._v(\" \"),_c('Pagination',{attrs:{\"pages\":_vm.pagination},on:{\"emitPages\":_vm.getCoupons}}),_vm._v(\" \"),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"couponModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"title\"}},[_vm._v(\"標題\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.title),expression:\"tempCoupon.title\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"title\",\"placeholder\":\"請輸入標題\"},domProps:{\"value\":(_vm.tempCoupon.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"title\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"coupon_code\"}},[_vm._v(\"優惠碼\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.code),expression:\"tempCoupon.code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"coupon_code\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.tempCoupon.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"code\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"due_date\"}},[_vm._v(\"到期日\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.due_date),expression:\"due_date\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"id\":\"due_date\"},domProps:{\"value\":(_vm.due_date)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.due_date=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"price\"}},[_vm._v(\"折扣百分比\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.percent),expression:\"tempCoupon.percent\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"price\",\"placeholder\":\"請輸入折扣百分比\"},domProps:{\"value\":(_vm.tempCoupon.percent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"percent\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.is_enabled),expression:\"tempCoupon.is_enabled\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"true-value\":1,\"false-value\":0,\"id\":\"is_enabled\"},domProps:{\"checked\":Array.isArray(_vm.tempCoupon.is_enabled)?_vm._i(_vm.tempCoupon.is_enabled,null)>-1:_vm._q(_vm.tempCoupon.is_enabled,1)},on:{\"change\":function($event){var $$a=_vm.tempCoupon.is_enabled,$$el=$event.target,$$c=$$el.checked?(1):(0);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.tempCoupon, \"is_enabled\", $$c)}}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"is_enabled\"}},[_vm._v(\"\\r\\n                  是否啟用\\r\\n                \")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Close\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.updateCoupon}},[_vm._v(\"更新優惠券\")])])])])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"名稱\")]),_vm._v(\" \"),_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"優惠碼\")]),_vm._v(\" \"),_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"折扣百分比\")]),_vm._v(\" \"),_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"到期日\")]),_vm._v(\" \"),_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"是否啟用\")]),_vm._v(\" \"),_c('th',{staticClass:\"py-4\",attrs:{\"scope\":\"col\"}},[_vm._v(\"編輯\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"exampleModalLabel\"}},[_vm._v(\"Modal title\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f08c80ba\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/back/BackCoupon.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BackCoupon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BackCoupon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f08c80ba\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BackCoupon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/back/BackCoupon.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}