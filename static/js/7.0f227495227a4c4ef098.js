webpackJsonp([7],{LYFh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),r=s.n(a),i={data:function(){return{orders:{},tempOrder:{},pagination:{},isLoading:!1}},components:{Pagination:s("cMGX").a},methods:{getOrders:function(){var t=this,e="https://vue-course-api.hexschool.io/api/emily/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(e).then(function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1,console.log("getOrders",e.data)})},openModal:function(t){this.tempOrder=r()({},t),$("#orderModal").modal("show"),console.log("openModal",this.tempOrder)},updateOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/emily/admin/order/"+t.tempOrder.id,s={data:t.tempOrder};t.isLoading=!0,this.$http.put(e,s).then(function(e){console.log(e.data),$("#orderModal").modal("hide"),t.getOrders(),t.isLoading=!1})}},created:function(){this.getOrders()}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),s("table",{staticClass:"table mt-4 mb-13"},[t._m(0),t._v(" "),s("tbody",t._l(t.orders,function(e){return s("tr",{key:e.id,class:{"text-secondary":!e.is_paid}},[s("td",[t._v(t._s(t._f("date")(e.create_at)))]),t._v(" "),s("td",[e.id?s("span",{domProps:{textContent:t._s(e.id)}}):t._e()]),t._v(" "),s("td",{staticClass:"py-4"},[s("ul",t._l(e.products,function(e,a){return s("li",{key:a},[t._v("\n                        "+t._s(e.product.title)+" 數量："+t._s(e.qty)+"\n                        "+t._s(e.product.unit)+"\n                    ")])}),0)]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),t._v(" "),s("td",{staticClass:"pl-10"},[e.is_paid?s("strong",{staticClass:"text-success"},[t._v("已付款")]):s("span",{staticClass:"text-muted"},[t._v("尚未啟用")])]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-outline-topic",on:{click:function(s){return t.openModal(e)}}},[t._v("\n                  編輯\n                ")])])])}),0)]),t._v(" "),s("Pagination",{attrs:{pages:t.pagination},on:{emitPages:t.getOrders}}),t._v(" "),s("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"orderModal","data-backdrop":"static"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",[t._v("訂單編號 "+t._s(t.tempOrder.id))]),t._v(" "),s("ul",{staticClass:"form-row mt-5"},[s("li",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"customName"}},[t._v("訂購人姓名")]),t._v(" "),t.tempOrder.user?s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"customName"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}}):t._e()]),t._v(" "),s("li",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"customTel"}},[t._v("訂購人電話")]),t._v(" "),t.tempOrder.user?s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"customTel"},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}}):t._e()]),t._v(" "),s("li",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"customMail"}},[t._v("訂購人信箱")]),t._v(" "),t.tempOrder.user?s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"customMail"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}}):t._e()]),t._v(" "),s("li",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"customAddress"}},[t._v("訂購人地址")]),t._v(" "),t.tempOrder.user?s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.address,expression:"tempOrder.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"customAddress"},domProps:{value:t.tempOrder.user.address},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"address",e.target.value)}}}):t._e()])]),t._v(" "),s("ul",{staticClass:"mt-5"},[t._v("訂單品項 :\n            "),t._l(t.tempOrder.products,function(e,a){return s("li",{key:a},[t._v("\n                "+t._s(e.product.title)+" 數量："+t._s(e.qty)+"\n                "+t._s(e.product.unit)+"\n            ")])})],2),t._v(" "),s("div",{staticClass:"form-check mt-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"defaultCheck1"},domProps:{checked:Array.isArray(t.tempOrder.is_paid)?t._i(t.tempOrder.is_paid,null)>-1:t.tempOrder.is_paid},on:{change:function(e){var s=t.tempOrder.is_paid,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.tempOrder,"is_paid",s.concat([null])):i>-1&&t.$set(t.tempOrder,"is_paid",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.tempOrder,"is_paid",r)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"defaultCheck1"}},[t._v("\n              是否付款\n            ")])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-topic",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            取消\n          ")]),t._v(" "),s("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.updateOrder}},[t._v(" \n            確認\n          ")])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"py-5"},[t._v("購買時間")]),t._v(" "),s("th",{staticClass:"py-5",attrs:{width:"250"}},[t._v("訂單編號")]),t._v(" "),s("th",{staticClass:"py-5",attrs:{width:"350"}},[t._v("購買款項")]),t._v(" "),s("th",{staticClass:"py-5"},[t._v("應付金額")]),t._v(" "),s("th",{staticClass:"py-5 pl-10"},[t._v("是否付款")]),t._v(" "),s("th",{staticClass:"py-5"},[t._v("編輯")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-warning text-white"},[e("h5",{staticClass:"modal-title bg-warning"},[this._v("修改訂單")]),this._v(" "),e("button",{staticClass:"close text-topic",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},d=s("VU/8")(i,o,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=7.0f227495227a4c4ef098.js.map